/** js原生触屏位置操作插件--Sition * author:lovefc * time:2019/05/24 14:07*/
"use strict";function Sition(e,t,o,n){var i=new Object;return i.startX=0,i.startY=0,i.sValue=18,i._sValue=-1*i.sValue,i.dom=e,i.domObjcet="",i.action="",i.nowAction=t,i.callBack=o,i.diffeValue=0,i.dowHeight=0,i.domWidth=0,i.domTop=0,i.dombottom=0,i.domLeft=0,i.domRight=0,i.sTime=0,i.eTime=0,i.clicknum=0,i.clicked=0,i.debug=n,i.debugInfo=function(e){1==i.debug&&console.log(e)},i.checkY=function(e){return e=Math.abs(e-i.startY),(i.sValue>=40?40:i.sValue)>=e},i.checkX=function(e){return e=Math.abs(e-i.startX),(i.sValue>=40?40:i.sValue)>=e},i.Start=function(e){i.getWHLR(),1==e.cancelable&&e.preventDefault();try{var t=e.touches[0],o=Number(t.pageX),n=Number(t.pageY);i.startX=o,i.startY=n}catch(e){console.log(e.message)}"clicked"!=i.nowAction?(i.sTime=0,"long"==i.nowAction&&(i.sTime=(new Date).getTime())):(objsTime=0==objsTime?(new Date).getTime():objsTime,objclicknum++,(new Date).getTime()-objsTime>400&&(objsTime=(new Date).getTime(),objclicknum=1))},i.Listener=function(e){e.preventDefault();try{var t=e.touches[0],o=Number(t.pageX),n=Number(t.pageY),c=o-i.startX,a=n-i.startY,d=new Array,u=2*i.sValue,m="";if(c>i.sValue&&i.checkY(n)&&(m="right"),c<i.sValue&&i.checkY(n)&&(m="left"),a<.5*i.sValue&&i.checkX(o)?m="up":a>i.sValue&&i.checkX(o)&&(m="down"),"left"===m||"right"===m){var s=i.dowHeight/2+i.domTop-u,l=i.dowHeight/2+i.domTop+u,f=document.documentElement.clientHeight-i.domBottom;n<=i.domTop+u?i.action=m+"Up":i.action=n>=f-u?m+"Down":n<l&&n>s?m+"Center":m,i.debugInfo(i.action),d.start=i.startX,d.end=o,i.diffeValue=d}else if("down"===m||"up"===m){var s=i.domWidth/2+i.domLeft-2*i.sValue,l=i.domWidth/2+i.domLeft+2*i.sValue,r=document.documentElement.clientWidth-i.domRight;o<=i.domLeft+i.sValue?i.action=m+"Left":o>=r-i.sValue?i.action=m+"Right":i.action=o<l&&o>s?m+"Center":m,i.debugInfo(i.action),d.start=i.startY,d.end=n,i.diffeValue=d}if(i.action+"Ing"===i.nowAction)return i.runFun(i.diffeValue),i.debugInfo(i.action+"Ing"),!1;i.sTime=0}catch(e){console.log(e.message)}},i.runFun=function(e){try{"function"==typeof i.callBack?o(e):console.log("not is function")}catch(e){console.log(e.message)}},i.End=function(e){e.preventDefault(),i.eTime=(new Date).getTime(),"long"===i.nowAction?0!=i.sTime&&i.eTime-i.sTime>500&&(i.runFun(i.diffeValue),i.action="",objsTime=0,objclicknum=0,i.debugInfo("long")):"clicked"===i.nowAction&&2==objclicknum&&(new Date).getTime()-objsTime<400?(i.runFun(i.diffeValue),i.action="",objclicknum=0,objsTime=0,i.debugInfo("clicked")):i.action===i.nowAction&&(i.runFun(i.diffeValue),i.action="",i.sTime=0),i.action+"Ing"!=i.nowAction+"Ing"&&(i.diffeValue=0)},i.getWHLR=function(){if(e=document.getElementById(i.dom),e?(i.dowHeight=e.offsetHeight,i.domWidth=e.offsetWidth):(e=document,i.dowHeight=document.documentElement.offsetHeight,i.domWidth=document.documentElement.offsetWidth),!i.domWidth||!i.dowHeight)return console.log("Can't get height and width"),!1;i.domTop=e.offsetTop,i.domLeft=e.offsetLeft,i.domRight=document.documentElement.clientWidth-e.offsetWidth-i.domLeft,i.domBottom=document.documentElement.clientHeight-e.offsetHeight-i.domTop},i.Init=function(){var e=document.getElementById(i.dom);e||(e=document),e.addEventListener("touchstart",i.Start,{passive:!1}),e.addEventListener("touchmove",i.Listener,{passive:!1}),e.addEventListener("touchend",i.End,{passive:!1})},i.Init(),i}var objsTime=0,objclicknum=0;